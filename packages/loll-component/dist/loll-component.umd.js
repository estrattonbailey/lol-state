!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){var t=require("nanomorph"),e=require("on-load"),n=e.KEY_ATTR,o=require("nanoassert");function r(t,e){var n={};for(var o in t)n[o]=t[o];for(var r in e)n[r]=e[r];return n}module.exports=function(u){o.ok("object"==typeof u,"component is not an object"),o.ok("function"==typeof u.render,"component.render() must be a function"),u.update&&o.ok("function"==typeof u.update,"component.update() must be a function");var a,f=!1;Object.assign(u,{state:{},ref:null,setState:function(e){if(!i(u.props,u.state))return function(){};var r="function"==typeof e?e(u.state):e;return o.ok("object"==typeof r,"setState received a value that was not an object"),Object.assign(u.state,r),function(){var e=u.render(u.props,u.state);a&&e.setAttribute(n,a),t(u.ref,e)}}});function i(t,e){return!u.update||u.update(t,e)}return function(t,s){if(void 0===s&&(s={}),o.ok("object"==typeof s,"external state passed to component must be an object"),console.log(s),u.ref||(u.init&&u.init(t,s),u.state=r(s,u.state),u.ref=u.render(t,u.state),u.props=t,(u.mount||u.unmount)&&(e(u.ref,function(){f||(f=!0,u.mount&&u.mount())},function(t){f&&(u.unmount&&u.unmount(),f=!1)},u),a=u.ref.getAttribute(n))),!i(t,r(s,u.state)))return u.ref;var c=s;u.props=t;for(var p in c)if(u.state[p]!==c[p]){u.setState(c)();break}return u.ref}}});
//# sourceMappingURL=loll-component.umd.js.map
