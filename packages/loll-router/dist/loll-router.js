var n=require("nanohref"),r=require("nanomorph"),e=require("mitt"),t="undefined"!=typeof window;function o(n){return void 0===n&&(n=window.location),n.href.replace(n.origin,"")}function i(n,r){var e=null;return r.replace(n.regex,function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];for(var o=function(t){n.keys.forEach(function(e){n.params[e]=r[t]}),e=!0},i=1;i<r.length-2;i++)o(i)}),e?n.params:e}function u(n){var r=n[0],e=n[1],t=[],o=new RegExp(r.replace(/\*/g,"(?:.*)").replace(/([:*])(\w+)/g,function(n){return t.push(n.slice(1)),"([\\w-]+)"})+"(?:[/|?w+]$|$)$","ig");return{route:r,handler:e,regex:o,keys:t,params:{},match:function(n){return!!o.test(n)&&i(this,n)}}}function a(n,r){void 0===n&&(n="/");for(var e=0,t=r;e<t.length;e+=1){var o=t[e],i=o.match(n);if(!1!==i)return Promise.resolve(o.handler(i||{})).catch(function(n){return console.error(n)})}return Promise.resolve(!1)}module.exports=function(i){void 0===i&&(i=[]);var c;i=i.map(u);return t?function(t,u,f){var d="function"==typeof e?e():e.default();function l(n,e){return a(n,i).then(function(o){return i=n,u=o,a=e,void window.requestAnimationFrame(function(){c?r(c,u):(t.appendChild(u),c=t.children[0]),window.history.pushState({},document.title,i),!a&&d.emit("render",u)});var i,u,a})}return n(function(n){var r=o(n);d.emit("navigate",r),l(r)}),window.onpopstate=function(n){l(o(n.target.location))},l(o(),!0).then(function(){return f&&f()}),Object.assign(d,{render:function(n,r){void 0===n&&(n=o()),l(n,r)}})}:function(n){return a(n,i).then(function(n){return n.outerHTML})}};
//# sourceMappingURL=loll-router.js.map
