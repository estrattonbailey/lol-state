var n=require("nanohref"),t=require("nanomorph"),e=require("mitt"),r="undefined"!=typeof window;function o(n,t){var e=null;return t.replace(n.regex,function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];for(var o=function(r){n.keys.forEach(function(e){n.params[e]=t[r]}),e=!0},u=1;u<t.length-2;u++)o(u)}),e?n.params:e}function u(n){var t=n[0],e=n[1],r=[],u=new RegExp(t.replace(/\*/g,"(?:.*)").replace(/([:*])(\w+)/g,function(n){return r.push(n.slice(1)),"([\\w-]+)"})+"(?:[/|?w+]$|$)$","ig");return{route:t,handler:e,regex:u,keys:r,params:{},match:function(n){return!!u.test(n)&&o(this,n)}}}function a(n,t,e){void 0===n&&(n="/");for(var r=0,o=t;r<o.length;r+=1){var u=o[r],a=u.match(n);if(!1!==a)return Promise.resolve(u.handler(a||{})).catch(function(n){return console.error(n)})}}module.exports=function(o){void 0===o&&(o=[]);var i=[];o=o.map(u);function c(n){var t=a(n,o);return t.then(function(n){return n.setAttribute("data-cuppa-root",""),n}),t}function f(n){n&&"function"==typeof n&&i.push(n)}return r?function(r,o,u){var a="function"==typeof e?e():e.default();function p(n,e,o){e=function(n){for(var t=0,e=i;t<e.length;t+=1)n=(0,e[t])(n);return n}(e),window.requestAnimationFrame(function(){var u=document.querySelector("[data-cuppa-root]");u?o?r.replaceChild(e,u):t(u,e):r.appendChild(e),window.history.pushState({},document.title,n),!o&&a.emit("render",e)})}function h(n,t){return c(n).then(function(e){return p(n,e,t)})}return n(function(n){var t=n.pathname;a.emit("navigate",t),h(t)}),window.onpopstate=function(n){h(n.target.location.pathname)},h(window.location.pathname,!0).then(function(){return u&&u()}),Object.assign(a,{use:f,go:h})}:function(n){return c(n).then(function(n){return n.outerHTML})}};
//# sourceMappingURL=loll-router.js.map
